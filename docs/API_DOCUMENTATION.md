# üöÄ Radon AI API Documentation

## üìã –û–±–∑–æ—Ä

Radon AI –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç RESTful API –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –º—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω–æ–π –Ω–µ–π—Ä–æ—Å–µ—Ç—å—é 30B –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤. API –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ —á–∞—Ç–æ–≤, –æ—Ç–ø—Ä–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å Clerk –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.

## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

–í—Å–µ API endpoints (–∫—Ä–æ–º–µ –ø—É–±–ª–∏—á–Ω—ã—Ö) —Ç—Ä–µ–±—É—é—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Clerk:

```http
Authorization: Bearer <clerk_session_token>
```

### –ü—É–±–ª–∏—á–Ω—ã–µ endpoints:
- `GET /api/radon/health` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è Radon AI
- `GET /api/radon/personalities` - –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ª–∏—á–Ω–æ—Å—Ç–µ–π

## üìä –û—Å–Ω–æ–≤–Ω—ã–µ endpoints

### 1. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–∞—Ç–∞–º–∏

#### `GET /api/chats`
–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–û—Ç–≤–µ—Ç:**
```json
[
  {
    "id": "chat_123",
    "title": "–ú–æ–π —á–∞—Ç",
    "createdAt": "2025-01-18T10:30:00Z",
    "messageCount": 5
  }
]
```

#### `POST /api/chats`
–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —á–∞—Ç.

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "title": "–ù–æ–≤—ã–π —á–∞—Ç"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "id": "chat_456",
  "title": "–ù–æ–≤—ã–π —á–∞—Ç",
  "createdAt": "2025-01-18T10:30:00Z",
  "messageCount": 0
}
```

#### `GET /api/chats/{chatId}`
–ü–æ–ª—É—á–∏—Ç—å —á–∞—Ç —Å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏.

**–û—Ç–≤–µ—Ç:**
```json
{
  "id": "chat_123",
  "title": "–ú–æ–π —á–∞—Ç",
  "createdAt": "2025-01-18T10:30:00Z",
  "messageCount": 2,
  "messages": [
    {
      "id": "msg_1",
      "role": "user",
      "content": "–ü—Ä–∏–≤–µ—Ç!",
      "createdAt": "2025-01-18T10:30:00Z"
    },
    {
      "id": "msg_2",
      "role": "assistant",
      "content": "–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞?",
      "createdAt": "2025-01-18T10:30:05Z"
    }
  ]
}
```

#### `PUT /api/chats/{chatId}`
–û–±–Ω–æ–≤–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ —á–∞—Ç–∞.

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "title": "–ù–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ"
}
```

#### `DELETE /api/chats/{chatId}`
–£–¥–∞–ª–∏—Ç—å —á–∞—Ç.

### 2. –°–æ–æ–±—â–µ–Ω–∏—è

#### `POST /api/chats/{chatId}/messages`
–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç.

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "content": "–ü—Ä–∏–≤–µ—Ç, Radon!",
  "imageUrl": "https://example.com/image.jpg", // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
  "personality": "helpful" // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "id": "msg_123",
  "role": "assistant",
  "content": "–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞?",
  "createdAt": "2025-01-18T10:30:00Z"
}
```

#### `PUT /api/chats/{chatId}/messages/{messageId}`
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ.

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "content": "–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ"
}
```

#### `DELETE /api/chats/{chatId}/messages/{messageId}`
–£–¥–∞–ª–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ.

### 3. Radon AI API

#### `GET /api/radon/health`
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ Radon AI.

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "healthy",
  "model_loaded": true,
  "gpu_available": true
}
```

#### `GET /api/radon/personalities`
–ü–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –ª–∏—á–Ω–æ—Å—Ç–∏.

**–û—Ç–≤–µ—Ç:**
```json
[
  {
    "id": "helpful",
    "name": "–ü–æ–º–æ—â–Ω–∏–∫",
    "description": "–î—Ä—É–∂–µ–ª—é–±–Ω—ã–π –∏ –ø–æ–ª–µ–∑–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç"
  },
  {
    "id": "creative",
    "name": "–ö—Ä–µ–∞—Ç–∏–≤—â–∏–∫",
    "description": "–¢–≤–æ—Ä—á–µ—Å–∫–∏–π –∏ –≤–¥–æ—Ö–Ω–æ–≤–ª—è—é—â–∏–π"
  }
]
```

#### `POST /api/radon/chat`
–ü—Ä—è–º–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ Radon AI (–¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è).

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "message": "–ü—Ä–∏–≤–µ—Ç!",
  "personality": "helpful",
  "conversation_id": "conv_123",
  "user_id": "user_456",
  "enable_functions": true
}
```

## üîÑ Drizzle ORM API (–ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è)

### `GET /api/chats-drizzle`
–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤ —á–µ—Ä–µ–∑ Drizzle ORM.

### `POST /api/chats-drizzle`
–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —á–∞—Ç —á–µ—Ä–µ–∑ Drizzle ORM.

## üìù –ö–æ–¥—ã –æ—à–∏–±–æ–∫

| –ö–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----|----------|
| 200 | –£—Å–ø–µ—à–Ω–æ |
| 201 | –°–æ–∑–¥–∞–Ω–æ |
| 400 | –ù–µ–≤–µ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å |
| 401 | –ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω |
| 403 | –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω |
| 404 | –ù–µ –Ω–∞–π–¥–µ–Ω–æ |
| 500 | –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ |
| 503 | –°–µ—Ä–≤–∏—Å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω |

## üîß –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### JavaScript/TypeScript

```typescript
// –°–æ–∑–¥–∞–Ω–∏–µ —á–∞—Ç–∞
const response = await fetch('/api/chats', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': `Bearer ${sessionToken}`
  },
  body: JSON.stringify({
    title: '–ú–æ–π –Ω–æ–≤—ã–π —á–∞—Ç'
  })
});

const chat = await response.json();
console.log('–°–æ–∑–¥–∞–Ω —á–∞—Ç:', chat);
```

### cURL

```bash
# –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤
curl -X GET "http://localhost:3000/api/chats" \
  -H "Authorization: Bearer YOUR_SESSION_TOKEN"

# –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —á–∞—Ç
curl -X POST "http://localhost:3000/api/chats" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_SESSION_TOKEN" \
  -d '{"title": "–ù–æ–≤—ã–π —á–∞—Ç"}'
```

## üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ Drizzle ORM:
- **–ü—É–ª —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π**: –î–æ 20 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- **–¢–∞–π–º–∞—É—Ç—ã**: 10 —Å–µ–∫—É–Ω–¥ –Ω–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ, 20 —Å–µ–∫—É–Ω–¥ –Ω–∞ idle
- **SSL**: –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è production
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –í–∫–ª—é—á–µ–Ω–æ –≤ development —Ä–µ–∂–∏–º–µ

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞–≥–∏–Ω–∞—Ü–∏—é –¥–ª—è –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–æ–≤
2. –ö—ç—à–∏—Ä—É–π—Ç–µ —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ streaming –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
4. –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –∫ –ë–î

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

1. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: –í—Å–µ endpoints –∑–∞—â–∏—â–µ–Ω—ã Clerk
2. **–í–∞–ª–∏–¥–∞—Ü–∏—è**: –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è
3. **SQL Injection**: –ó–∞—â–∏—Ç–∞ —á–µ—Ä–µ–∑ Drizzle ORM
4. **Rate Limiting**: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)
5. **CORS**: –ù–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è production –¥–æ–º–µ–Ω–æ–≤

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏:
- –í—Å–µ API –∑–∞–ø—Ä–æ—Å—ã –ª–æ–≥–∏—Ä—É—é—Ç—Å—è
- –û—à–∏–±–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—Å—è

### –ú–µ—Ç—Ä–∏–∫–∏:
- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ API
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- –°—Ç–∞—Ç—É—Å Radon AI
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞:
```bash
# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
npm run dev

# –ó–∞–ø—É—Å–∫ Prisma Studio
npx prisma studio

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º–∏–≥—Ä–∞—Ü–∏–π Drizzle
npx drizzle-kit generate

# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
npx drizzle-kit migrate
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```env
DATABASE_URL=postgresql://...
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_test_...
CLERK_SECRET_KEY=sk_test_...
RADON_API_URL=http://213.219.215.235:8000
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å Radon AI: `GET /api/radon/health`
4. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º

---

**–í–µ—Ä—Å–∏—è API**: 2.0.0  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 18 —è–Ω–≤–∞—Ä—è 2025  
**–ê–≤—Ç–æ—Ä**: MagistrTheOne
